<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>

<div class="container bg-light p-4 rounded mt-3">
    <h1>URL Shortener</h1>
<form id="urlForm">
    <div class="mb-3">
    <label for="short" class="form-label" >Short URL (e.g., /gh):</label><br>

    <input type="text" id="short" name="short" required class="form-control"><br><br>

    </div>
    <div class="mb-3">
    <label for="long">Long URL (e.g., https://github.com):</label><br>
    <input type="url" id="long" name="long" required class="form-control"><br><br>
    </div>
    <div class="container-sm">
    <input type="submit" value="Create Short URL" class="btn btn-primary">
    </div>
</form>
<p id="response"></p>
</div>

<script>
    document.getElementById('urlForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const short = document.getElementById('short').value;
        const long = document.getElementById('long').value;

        fetch('/urls', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ short: short, long: long })
        })
            .then(response => {
                if (response.status === 201) { // Success!
                    document.getElementById('response').innerText = 'Short URL created successfully!';
                } else { // Error
                    return response.text().then(text => { throw new Error(text) });
                }
            })
            .catch(error => {
                document.getElementById('response').innerText = 'Error: ' + error.message;
            });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>
`